:name: da1468x_QSPI_debug.resc
:description: This script runs da1468x compiled for QSPI and starts up the debugger.

using sysbus

mach create
machine LoadPlatformDescription @/Users/chadkidd/development/renode/platforms/boards/da14683_devkit-usb.repl

$elf?=@/Users/chadkidd/development/bio-firmware/build/patch/bbn1/biointellisense/patch-bbn1-biointellisense-1.5.0.elf

$bin?=@/Users/chadkidd/development/bio-firmware/build/patch/bbn1/biointellisense/patch-bbn1-biointellisense-1.5.0.bin

$rom?=@/Users/chadkidd/development/renode-development-files/DA14681_ROM.bin

$otp?=@/Users/chadkidd/development/renode-development-files/DA14681_OTP.bin

$partition?=@/Users/chadkidd/development/renode-development-files/DA14681_NVMS_PART_TBL.bin

sysbus LoadELF $elf

sysbus LoadBinary $bin 0x8010000

sysbus LoadBinary $rom 0x7F00000

sysbus LoadBinary $otp 0x7F80000

sysbus LoadBinary $partition 0x807F000


sysbus.cpu SP 0x7FC0910
sysbus.cpu PC 0x8010170
sysbus.cpu VectorTableOffset 0x8010000

logLevel -1 sysbus.qspic
logLevel -1 sysbus.timer1
showAnalyzer sysbus.uart1
sysbus.cpu ExecutionMode SingleStep
sysbus.cpu LogFunctionNames True

machine StartGdbServer 3333
